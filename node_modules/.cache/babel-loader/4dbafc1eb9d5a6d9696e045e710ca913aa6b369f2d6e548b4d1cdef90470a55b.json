{"ast":null,"code":"import { Buffer } from 'buffer';\nglobal.Buffer = Buffer;\nimport parse from 'csv-parse/lib/sync';\nimport http from './http';\nimport dataUrl from '../config.json';\nexport async function getProducts() {\n  // @ts-ignore\n  const input = await http.get(dataUrl);\n  console.log(\"getProducts - start parse\");\n  const products = parse(input, {\n    columns: true,\n    skip_empty_lines: true\n  });\n  return sanitizeGenders(products);\n}\nexport function sanitizeGenders(products) {\n  for (const product of products) {\n    if (product.gender !== 'male' && product.gender !== 'female' && product.gender !== 'unisex') {\n      product.gender = null;\n    }\n  }\n  return products;\n}","map":{"version":3,"names":["Buffer","global","parse","http","dataUrl","getProducts","input","get","console","log","products","columns","skip_empty_lines","sanitizeGenders","product","gender"],"sources":["C:/Users/Starskvim/WebstormProjects/product-list/src/services/product.ts"],"sourcesContent":["import { Buffer } from 'buffer';\r\nglobal.Buffer = Buffer;\r\nimport parse from 'csv-parse/lib/sync';\r\nimport http from './http';\r\nimport dataUrl  from '../config.json';\r\nimport { Product } from '../types/product';\r\n\r\n\r\nexport async function getProducts(): Promise<Product[]> {\r\n  // @ts-ignore\r\n  const input = await http.get(dataUrl) as string;\r\n\r\n  console.log(\"getProducts - start parse\")\r\n  const products: Product[] = parse(input, {\r\n    columns: true,\r\n    skip_empty_lines: true\r\n  });\r\n\r\n  return sanitizeGenders(products);\r\n}\r\n\r\nexport function sanitizeGenders(products: Product[]): Product[] {\r\n  for (const product of products) {\r\n    if (product.gender !== 'male' && product.gender !== 'female' && product.gender !== 'unisex') {\r\n      product.gender = null;\r\n    }\r\n  }\r\n  return products;\r\n}"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/BC,MAAM,CAACD,MAAM,GAAGA,MAAM;AACtB,OAAOE,KAAK,MAAM,oBAAoB;AACtC,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAOC,OAAO,MAAO,gBAAgB;AAIrC,OAAO,eAAeC,WAAWA,CAAA,EAAuB;EACtD;EACA,MAAMC,KAAK,GAAG,MAAMH,IAAI,CAACI,GAAG,CAACH,OAAO,CAAW;EAE/CI,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;EACxC,MAAMC,QAAmB,GAAGR,KAAK,CAACI,KAAK,EAAE;IACvCK,OAAO,EAAE,IAAI;IACbC,gBAAgB,EAAE;EACpB,CAAC,CAAC;EAEF,OAAOC,eAAe,CAACH,QAAQ,CAAC;AAClC;AAEA,OAAO,SAASG,eAAeA,CAACH,QAAmB,EAAa;EAC9D,KAAK,MAAMI,OAAO,IAAIJ,QAAQ,EAAE;IAC9B,IAAII,OAAO,CAACC,MAAM,KAAK,MAAM,IAAID,OAAO,CAACC,MAAM,KAAK,QAAQ,IAAID,OAAO,CAACC,MAAM,KAAK,QAAQ,EAAE;MAC3FD,OAAO,CAACC,MAAM,GAAG,IAAI;IACvB;EACF;EACA,OAAOL,QAAQ;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}