{"ast":null,"code":"import React,{Component}from'react';import Dropdown from'react-bootstrap/Dropdown';import DropdownButton from'react-bootstrap/DropdownButton';import ToggleButton from'react-bootstrap/ToggleButton';import ImageOverlay from'./components/ImageOverlay';import Pagination from'./components/Pagination';import ProductList from'./components/ProductList';import SearchBox from'./components/SearchBox';import{getProducts}from'./services/product';import{initialState}from'./types/state';import{paginate}from'./utils/paginate';import{sanitizeUrls}from'./utils/sanitizeUrls';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class App extends Component{constructor(){super(...arguments);this.state=initialState;this.cachedImages={};this.handleSearch=query=>{this.setState({searchQuery:query,currentPage:1});};this.handleGenderFilter=gender=>{this.setState({gender,currentPage:1});};this.handleSaleFilter=filterBySale=>{this.setState({filterBySale,currentPage:1});};this.handlePageChange=page=>{this.setState({currentPage:page});};this.handleProductClick=product=>{const urls=sanitizeUrls(product.additional_image_link);if(urls.length<1)return;this.setState({showAdditionalImage:true,additionalImageUrls:urls});};this.handleOverlayBgClick=()=>{this.setState({showAdditionalImage:false,additionalImageUrls:[]});};this.getFilteredProducts=()=>{const{filterBySale,gender,products:allProducts,searchQuery}=this.state;let filtered=allProducts;if(searchQuery){filtered=allProducts.filter(p=>p.title.toLowerCase().includes(searchQuery.toLowerCase()));}if(gender!=='all'){filtered=filtered.filter(p=>p.gender===gender);}if(filterBySale){filtered=filtered.filter(p=>p.price>p.sale_price);}return filtered;};}async componentDidMount(){const products=await getProducts();this.setState({products});}render(){const{additionalImageUrls,currentPage,filterBySale,gender,maxProductsPerPage,searchQuery,showAdditionalImage}=this.state;const filtered=this.getFilteredProducts();const paginated=paginate(filtered,currentPage,maxProductsPerPage);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(SearchBox,{value:searchQuery,onChange:this.handleSearch})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',width:'260px'},children:/*#__PURE__*/_jsxs(DropdownButton,{id:\"dropdown-basic-button\",title:\"Filter by Gender (\".concat(gender,\")\"),children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>this.handleGenderFilter('all'),active:gender==='all',children:\"All\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>this.handleGenderFilter('male'),active:gender==='male',children:\"Male\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>this.handleGenderFilter('female'),active:gender==='female',children:\"Female\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:()=>this.handleGenderFilter('unisex'),active:gender==='unisex',children:\"Unisex\"})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',width:'150px'},children:/*#__PURE__*/_jsx(ToggleButton,{id:\"toggle-check\",type:\"checkbox\",variant:\"outline-primary\",checked:filterBySale,value:\"1\",onChange:e=>this.handleSaleFilter(e.currentTarget.checked),children:\"Filter by Sale\"})})]}),/*#__PURE__*/_jsx(ProductList,{products:paginated,onProductClick:this.handleProductClick,cachedImages:this.cachedImages}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Pagination,{itemsCount:filtered.length,maxItemsPerPage:maxProductsPerPage,currentPage:currentPage,onPageChange:this.handlePageChange})})}),showAdditionalImage?/*#__PURE__*/_jsx(ImageOverlay,{additionalImageUrls:additionalImageUrls,onBgClick:this.handleOverlayBgClick,cachedImages:this.cachedImages}):null]});}}export default App;","map":{"version":3,"names":["React","Component","Dropdown","DropdownButton","ToggleButton","ImageOverlay","Pagination","ProductList","SearchBox","getProducts","initialState","paginate","sanitizeUrls","jsx","_jsx","jsxs","_jsxs","App","constructor","arguments","state","cachedImages","handleSearch","query","setState","searchQuery","currentPage","handleGenderFilter","gender","handleSaleFilter","filterBySale","handlePageChange","page","handleProductClick","product","urls","additional_image_link","length","showAdditionalImage","additionalImageUrls","handleOverlayBgClick","getFilteredProducts","products","allProducts","filtered","filter","p","title","toLowerCase","includes","price","sale_price","componentDidMount","render","maxProductsPerPage","paginated","className","children","value","onChange","style","display","justifyContent","alignItems","width","id","concat","Item","onClick","active","type","variant","checked","e","currentTarget","onProductClick","itemsCount","maxItemsPerPage","onPageChange","onBgClick"],"sources":["C:/Users/Starskvim/WebstormProjects/product-list/src/App.tsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport DropdownButton from 'react-bootstrap/DropdownButton';\r\nimport ToggleButton from 'react-bootstrap/ToggleButton';\r\n\r\nimport ImageOverlay from './components/ImageOverlay';\r\nimport Pagination from './components/Pagination';\r\nimport ProductList from './components/ProductList';\r\nimport SearchBox from './components/SearchBox';\r\nimport { getProducts } from './services/product';\r\nimport { Product } from './types/product';\r\nimport { initialState, State } from './types/state';\r\nimport { paginate } from './utils/paginate';\r\nimport { sanitizeUrls } from './utils/sanitizeUrls';\r\n\r\nclass App extends Component {\r\n  state: State = initialState;\r\n  cachedImages: { [url in string]: HTMLImageElement } = {};\r\n\r\n  async componentDidMount() {\r\n    const products = await getProducts();\r\n    this.setState({ products });\r\n  }\r\n\r\n  handleSearch = (query: string) => {\r\n    this.setState({ searchQuery: query, currentPage: 1 });\r\n  };\r\n  handleGenderFilter = (gender: string) => {\r\n    this.setState({ gender, currentPage: 1 });\r\n  };\r\n  handleSaleFilter = (filterBySale: boolean) => {\r\n    this.setState({ filterBySale, currentPage: 1 });\r\n  };\r\n  handlePageChange = (page: number) => {\r\n    this.setState({ currentPage: page });\r\n  };\r\n  handleProductClick = (product: Product) => {\r\n    const urls = sanitizeUrls(product.additional_image_link);\r\n    if (urls.length < 1) return;\r\n    this.setState({ showAdditionalImage: true, additionalImageUrls: urls });\r\n  };\r\n  handleOverlayBgClick = () => {\r\n    this.setState({ showAdditionalImage: false, additionalImageUrls: [] });\r\n  };\r\n\r\n  getFilteredProducts = () => {\r\n    const {\r\n      filterBySale,\r\n      gender,\r\n      products: allProducts,\r\n      searchQuery,\r\n    } = this.state;\r\n\r\n    let filtered = allProducts;\r\n    if (searchQuery) {\r\n      filtered = allProducts.filter(p => p.title.toLowerCase().includes(searchQuery.toLowerCase()))\r\n    }\r\n    if (gender !== 'all') {\r\n      filtered = filtered.filter(p => p.gender === gender);\r\n    }\r\n    if (filterBySale) {\r\n      filtered = filtered.filter(p => p.price > p.sale_price);\r\n    }\r\n\r\n    return filtered;\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      additionalImageUrls,\r\n      currentPage,\r\n      filterBySale,\r\n      gender,\r\n      maxProductsPerPage,\r\n      searchQuery,\r\n      showAdditionalImage,\r\n    } = this.state;\r\n\r\n    const filtered = this.getFilteredProducts();\r\n    const paginated: Product[] = paginate(filtered, currentPage, maxProductsPerPage);\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <SearchBox value={searchQuery} onChange={this.handleSearch} />\r\n          </div>\r\n          <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', width: '260px'}}>\r\n            <DropdownButton id=\"dropdown-basic-button\" title={`Filter by Gender (${gender})`}>\r\n              <Dropdown.Item onClick={() => this.handleGenderFilter('all')} active={gender === 'all'}>All</Dropdown.Item>\r\n              <Dropdown.Item onClick={() => this.handleGenderFilter('male')} active={gender === 'male'}>Male</Dropdown.Item>\r\n              <Dropdown.Item onClick={() => this.handleGenderFilter('female')} active={gender === 'female'}>Female</Dropdown.Item>\r\n              <Dropdown.Item onClick={() => this.handleGenderFilter('unisex')} active={gender === 'unisex'}>Unisex</Dropdown.Item>\r\n            </DropdownButton>\r\n          </div>\r\n          <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', width: '150px'}}>\r\n            <ToggleButton\r\n              id=\"toggle-check\"\r\n              type=\"checkbox\"\r\n              variant=\"outline-primary\"\r\n              checked={filterBySale}\r\n              value=\"1\"\r\n              onChange={(e) => this.handleSaleFilter(e.currentTarget.checked)}\r\n            >\r\n              Filter by Sale\r\n            </ToggleButton>\r\n          </div>\r\n        </div>\r\n        <ProductList products={paginated} onProductClick={this.handleProductClick} cachedImages={this.cachedImages} />\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Pagination itemsCount={filtered.length} maxItemsPerPage={maxProductsPerPage} currentPage={currentPage} onPageChange={this.handlePageChange} />\r\n          </div>\r\n        </div>\r\n        { showAdditionalImage ? <ImageOverlay additionalImageUrls={additionalImageUrls} onBgClick={this.handleOverlayBgClick} cachedImages={this.cachedImages} /> : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}