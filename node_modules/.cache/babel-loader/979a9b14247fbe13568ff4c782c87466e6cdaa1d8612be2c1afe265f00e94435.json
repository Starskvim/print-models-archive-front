{"ast":null,"code":"// import { Buffer } from 'buffer';\n// global.Buffer = Buffer;\n// import parse from 'csv-parse/lib/sync';\nimport http from './http';\n// import dataUrl  from '../config.json';\n\nexport async function getProducts() {\n  // // @ts-ignore\n  // const input = await http.get(dataUrl) as string;\n  //\n  // console.log(\"getProducts - start parse\")\n  // const products: Product[] = parse(input, {\n  //   columns: true,\n  //   skip_empty_lines: true\n  // });\n\n  // return sanitizeGenders(products);\n\n  const input = await http.get(\"http://localhost:8081/archive/api/models\");\n  return input.models;\n}\nexport function sanitizeGenders(products) {\n  for (const product of products) {\n    if (product.gender !== 'male' && product.gender !== 'female' && product.gender !== 'unisex') {\n      product.gender = null;\n    }\n  }\n  return products;\n}","map":{"version":3,"names":["http","getProducts","input","get","models","sanitizeGenders","products","product","gender"],"sources":["C:/Users/Starskvim/WebstormProjects/product-list/src/services/product.ts"],"sourcesContent":["// import { Buffer } from 'buffer';\r\n// global.Buffer = Buffer;\r\n// import parse from 'csv-parse/lib/sync';\r\nimport http from './http';\r\n// import dataUrl  from '../config.json';\r\nimport { Product } from '../types/product';\r\nimport { PrintModelsResponse } from '../types/PrintModelsResponse';\r\nimport { PrintModelCard } from '../types/PrintModelCard';\r\nimport axios, { AxiosResponse } from \"axios\";\r\n\r\n\r\nexport async function getProducts(): Promise<PrintModelCard[]> {\r\n  // // @ts-ignore\r\n  // const input = await http.get(dataUrl) as string;\r\n  //\r\n  // console.log(\"getProducts - start parse\")\r\n  // const products: Product[] = parse(input, {\r\n  //   columns: true,\r\n  //   skip_empty_lines: true\r\n  // });\r\n\r\n  // return sanitizeGenders(products);\r\n\r\n  const input = await http.get(\"http://localhost:8081/archive/api/models\") as PrintModelsResponse\r\n\r\n  return input.models\r\n}\r\n\r\nexport function sanitizeGenders(products: Product[]): Product[] {\r\n  for (const product of products) {\r\n    if (product.gender !== 'male' && product.gender !== 'female' && product.gender !== 'unisex') {\r\n      product.gender = null;\r\n    }\r\n  }\r\n  return products;\r\n}"],"mappings":"AAAA;AACA;AACA;AACA,OAAOA,IAAI,MAAM,QAAQ;AACzB;;AAOA,OAAO,eAAeC,WAAWA,CAAA,EAA8B;EAC7D;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA,MAAMC,KAAK,GAAG,MAAMF,IAAI,CAACG,GAAG,CAAC,0CAA0C,CAAwB;EAE/F,OAAOD,KAAK,CAACE,MAAM;AACrB;AAEA,OAAO,SAASC,eAAeA,CAACC,QAAmB,EAAa;EAC9D,KAAK,MAAMC,OAAO,IAAID,QAAQ,EAAE;IAC9B,IAAIC,OAAO,CAACC,MAAM,KAAK,MAAM,IAAID,OAAO,CAACC,MAAM,KAAK,QAAQ,IAAID,OAAO,CAACC,MAAM,KAAK,QAAQ,EAAE;MAC3FD,OAAO,CAACC,MAAM,GAAG,IAAI;IACvB;EACF;EACA,OAAOF,QAAQ;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}