{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Starskvim\\\\WebstormProjects\\\\product-list\\\\src\\\\components\\\\AsyncImage.tsx\",\n  _s = $RefreshSig$();\nimport { createRef, useEffect } from \"react\";\nimport { drawAndFill, fill } from '../utils/canvas';\nimport { default as AsyncImg } from '../classes/asyncImage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AsyncImage = ({\n  src,\n  width,\n  height,\n  cachedImages,\n  className,\n  bgColor,\n  preloadBgColor\n}) => {\n  _s();\n  const canvasRef = /*#__PURE__*/createRef();\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    canvas.width = width;\n    canvas.height = height;\n    if (preloadBgColor) {\n      fill(canvas, preloadBgColor);\n    }\n    if (!src) return;\n    if (!cachedImages[src]) {\n      const asyncImage = new AsyncImg(src, (img, e) => {\n        cachedImages[src] = img;\n        drawAndFill(canvas, cachedImages[src], bgColor);\n      });\n      return () => asyncImage.close();\n    } else {\n      drawAndFill(canvas, cachedImages[src], bgColor);\n    }\n  }, [src]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    className: className\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 13\n  }, this);\n};\n_s(AsyncImage, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = AsyncImage;\nexport default AsyncImage;\nvar _c;\n$RefreshReg$(_c, \"AsyncImage\");","map":{"version":3,"names":["createRef","useEffect","drawAndFill","fill","default","AsyncImg","jsxDEV","_jsxDEV","AsyncImage","src","width","height","cachedImages","className","bgColor","preloadBgColor","_s","canvasRef","canvas","current","asyncImage","img","e","close","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Starskvim/WebstormProjects/product-list/src/components/AsyncImage.tsx"],"sourcesContent":["import {createRef, useEffect} from \"react\";\r\nimport {drawAndFill, fill} from '../utils/canvas';\r\nimport {default as AsyncImg} from '../classes/asyncImage';\r\n\r\nconst AsyncImage = (\r\n    {\r\n        src, width, height, cachedImages, className, bgColor, preloadBgColor\r\n    }: {\r\n        src: string, width: number, height: number, cachedImages: {\r\n            [url in string]: HTMLImageElement\r\n        }, className?: string, bgColor?: string, preloadBgColor?: string\r\n    }) => {\r\n\r\n    const canvasRef = createRef<HTMLCanvasElement>();\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current!;\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        if (preloadBgColor) {\r\n            fill(canvas, preloadBgColor);\r\n        }\r\n\r\n        if (!src) return;\r\n\r\n        if (!cachedImages[src]) {\r\n            const asyncImage = new AsyncImg(src, (img: HTMLImageElement, e: Event) => {\r\n                cachedImages[src] = img;\r\n                drawAndFill(canvas, cachedImages[src], bgColor);\r\n            });\r\n            return () => asyncImage.close();\r\n        } else {\r\n            drawAndFill(canvas, cachedImages[src], bgColor);\r\n        }\r\n    }, [src]);\r\n\r\n    return (<canvas ref={canvasRef} className={className}></canvas>);\r\n};\r\n\r\nexport default AsyncImage;"],"mappings":";;AAAA,SAAQA,SAAS,EAAEC,SAAS,QAAO,OAAO;AAC1C,SAAQC,WAAW,EAAEC,IAAI,QAAO,iBAAiB;AACjD,SAAQC,OAAO,IAAIC,QAAQ,QAAO,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1D,MAAMC,UAAU,GAAGA,CACf;EACIC,GAAG;EAAEC,KAAK;EAAEC,MAAM;EAAEC,YAAY;EAAEC,SAAS;EAAEC,OAAO;EAAEC;AAK1D,CAAC,KAAK;EAAAC,EAAA;EAEN,MAAMC,SAAS,gBAAGjB,SAAS,CAAoB,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACZ,MAAMiB,MAAM,GAAGD,SAAS,CAACE,OAAQ;IACjCD,MAAM,CAACR,KAAK,GAAGA,KAAK;IACpBQ,MAAM,CAACP,MAAM,GAAGA,MAAM;IACtB,IAAII,cAAc,EAAE;MAChBZ,IAAI,CAACe,MAAM,EAAEH,cAAc,CAAC;IAChC;IAEA,IAAI,CAACN,GAAG,EAAE;IAEV,IAAI,CAACG,YAAY,CAACH,GAAG,CAAC,EAAE;MACpB,MAAMW,UAAU,GAAG,IAAIf,QAAQ,CAACI,GAAG,EAAE,CAACY,GAAqB,EAAEC,CAAQ,KAAK;QACtEV,YAAY,CAACH,GAAG,CAAC,GAAGY,GAAG;QACvBnB,WAAW,CAACgB,MAAM,EAAEN,YAAY,CAACH,GAAG,CAAC,EAAEK,OAAO,CAAC;MACnD,CAAC,CAAC;MACF,OAAO,MAAMM,UAAU,CAACG,KAAK,CAAC,CAAC;IACnC,CAAC,MAAM;MACHrB,WAAW,CAACgB,MAAM,EAAEN,YAAY,CAACH,GAAG,CAAC,EAAEK,OAAO,CAAC;IACnD;EACJ,CAAC,EAAE,CAACL,GAAG,CAAC,CAAC;EAET,oBAAQF,OAAA;IAAQiB,GAAG,EAAEP,SAAU;IAACJ,SAAS,EAAEA;EAAU;IAAAY,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAS,CAAC;AACnE,CAAC;AAACZ,EAAA,CAjCIR,UAAU;AAAAqB,EAAA,GAAVrB,UAAU;AAmChB,eAAeA,UAAU;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}